<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Match Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
    <div class="container mx-auto max-w-7xl px-4 py-8 flex-grow">
        <!-- Header -->
        <h1 class="text-3xl font-bold text-gray-800 text-center">Sports Match Predictor</h1>

        <!-- Filter by Sport -->
        <div class="mt-8">
            <h2 class="text-xl font-semibold text-gray-800">Filter by Sport</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mt-2">
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('Football')">Football</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('Basketball')">Basketball</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('Hockey')">Hockey</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('Tennis')">Tennis</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('Volleyball')">Volleyball</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('Baseball')">Baseball</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('American Football')">American Football</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('Rugby Union')">Rugby Union</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('Cricket')">Cricket</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('Handball')">Handball</button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition" onclick="filterMatches('All')">All</button>
            </div>
        </div>

        <!-- Upcoming Matches -->
        <div class="mt-8">
            <h2 class="text-xl font-semibold text-gray-800">Upcoming Matches</h2>
            <div id="match-list" class="mt-4"></div>
        </div>

        <!-- View Prediction Statistics -->
        <div class="mt-8 text-center">
            <button class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded transition" onclick="showStats()">View Prediction Statistics</button>
        </div>
    </div>

    <!-- Download Prediction Modal -->
    <div id="download-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-md max-w-md w-full">
            <h2 class="text-xl font-semibold text-gray-800">Download Prediction</h2>
            <p class="mt-2 text-gray-600">Download Actual Prediction File</p>
            <div class="mt-4 flex justify-end space-x-2">
                <a href="#" class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded transition">Download Actual Prediction File</a>
                <button class="bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded transition" onclick="closeModal('download-modal')">Back to Matches</button>
            </div>
        </div>
    </div>

    <!-- Prediction Statistics Section -->
    <div id="stats-section" class="hidden container mx-auto max-w-7xl px-4 py-8">
        <h2 class="text-xl font-semibold text-gray-800">Prediction Statistics</h2>
        <div class="mt-4 bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-lg font-semibold text-gray-800">Accuracy Over Time</h3>
            <div id="accuracy-chart" class="mt-4"></div>
            <h3 class="text-lg font-semibold text-gray-800 mt-4">Statistics</h3>
            <p class="text-gray-600">Last Month: 78% accuracy across 150 predictions.</p>
            <p class="text-gray-600">Last Year: 82% accuracy across 1800 predictions.</p>
        </div>
        <div class="mt-4 text-center">
            <button class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded transition" onclick="showMatches()">Back to Matches</button>
        </div>
    </div>

    <!-- App Download Modal -->
    <div id="app-download-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-md max-w-md w-full">
            <h2 class="text-xl font-semibold text-gray-800">Download Required</h2>
            <p class="mt-2 text-gray-600">To view match predictions, please download the Sports Match Predictor App.</p>
            <div class="mt-4 flex justify-end space-x-2">
                <a href="https://github.com/tukuafuchristine047/apk_release/releases/download/app/app-release.apk" class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded transition">Download App</a>
                <button class="bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded transition" onclick="closeModal('app-download-modal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-100 py-4 mt-8">
        <p class="text-center text-gray-600">Â© 2025 Sports Match Predictor. All rights reserved.</p>
    </footer>

    <script>
        // Sample matches data
        const matches = [
            { team1: "Ranheim", team2: "Raufoss", sport: "Football" },
            { team1: "Arsenal", team2: "Chelsea", sport: "Football" },
            { team1: "Lakers", team2: "Celtics", sport: "Basketball" },
            { team1: "Maple Leafs", team2: "Canadiens", sport: "Hockey" }
        ];

        // Render matches
        function renderMatches(sport = "All") {
            console.log("Rendering matches for sport:", sport);
            const matchList = document.getElementById("match-list");
            if (!matchList) {
                console.error("Error: #match-list element not found");
                return;
            }
            matchList.innerHTML = "";
            if (matches.length === 0) {
                console.warn("No matches available");
                matchList.innerHTML = '<p class="text-gray-600">No matches available</p>';
                return;
            }
            matches
                .filter(match => sport === "All" || match.sport === sport)
                .forEach(match => {
                    try {
                        const matchDiv = document.createElement("div");
                        matchDiv.className = "bg-white p-4 rounded-lg shadow-md mb-4";
                        matchDiv.innerHTML = `
                            <p class="text-gray-800">${match.team1} vs ${match.team2} (${match.sport})</p>
                            <button class="bg-blue-500 hover:bg-blue-700 text-white py-1 px-3 rounded transition mt-2" onclick="viewPredictions('${match.team1}', '${match.team2}')">View Predictions</button>
                        `;
                        matchList.appendChild(matchDiv);
                    } catch (error) {
                        console.error("Error rendering match:", match, error);
                    }
                });
        }

        // Filter matches by sport
        function filterMatches(sport) {
            console.log("Filtering matches for sport:", sport);
            try {
                renderMatches(sport);
            } catch (error) {
                console.error("Error in filterMatches:", error);
            }
        }

        // View predictions
        function viewPredictions(team1, team2) {
            console.log("viewPredictions called with:", team1, team2);
            try {
                const match = `${team1} vs ${team2}`;
                const encodedMatch = encodeURIComponent(match);
                const httpsDeepLink = `https://tukuafuchristine047.github.io/predictions?match=${encodedMatch}`;
                const customDeepLink = `sportmatchpredictor://predictions?match=${encodedMatch}`;
                const downloadUrl = "https://github.com/tukuafuchristine047/apk_release/releases/download/app/app-release.apk";

                const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
                console.log(`Device is mobile: ${isMobile}, HTTPS Deep link: ${httpsDeepLink}, Custom Deep link: ${customDeepLink}`);

                if (isMobile) {
                    window.location.href = customDeepLink;
                    setTimeout(() => {
                        window.location.href = httpsDeepLink;
                        console.log("Trying HTTPS deep link");
                    }, 500);
                    setTimeout(() => {
                        console.log("App not opened, showing download modal");
                        showModal("app-download-modal");
                    }, 2000);
                } else {
                    console.log("Desktop device, showing download modal");
                    showModal("app-download-modal");
                }
            } catch (error) {
                console.error("Error in viewPredictions:", error);
            }
        }

        // Modal handling
        function showModal(modalId) {
            console.log("Showing modal:", modalId);
            try {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove("hidden");
                } else {
                    console.error("Modal not found:", modalId);
                }
            } catch (error) {
                console.error("Error in showModal:", error);
            }
        }

        function closeModal(modalId) {
            console.log("Closing modal:", modalId);
            try {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add("hidden");
                } else {
                    console.error("Modal not found:", modalId);
                }
            } catch (error) {
                console.error("Error in closeModal:", error);
            }
        }

        // Show/hide stats and matches
        function showStats() {
            console.log("Showing stats section");
            try {
                const statsSection = document.getElementById("stats-section");
                const mainContainer = document.querySelector(".container");
                if (statsSection && mainContainer) {
                    statsSection.classList.remove("hidden");
                    mainContainer.classList.add("hidden");
                } else {
                    console.error("Stats section or main container not found");
                }
            } catch (error) {
                console.error("Error in showStats:", error);
            }
        }

        function showMatches() {
            console.log("Showing matches");
            try {
                const statsSection = document.getElementById("stats-section");
                const mainContainer = document.querySelector(".container");
                if (statsSection && mainContainer) {
                    statsSection.classList.add("hidden");
                    mainContainer.classList.remove("hidden");
                } else {
                    console.error("Stats section or main container not found");
                }
            } catch (error) {
                console.error("Error in showMatches:", error);
            }
        }

        // Ensure renderMatches is called after DOM is loaded
        document.addEventListener("DOMContentLoaded", () => {
            console.log("DOM loaded, calling renderMatches");
            renderMatches();
        });
    </script>
</body>
</html>
